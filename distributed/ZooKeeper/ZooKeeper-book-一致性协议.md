# ZooKeeper book 一致性协议

---

## Document & Code
> * [../Zookeeper-book](https://github.com/zozospider/note/blob/master/distributed/ZooKeeper/ZooKeeper-book.md)

---

## 从集中式到分布式

### 集中式的特点
> * 所有业务单元集中部署在一个中心节点。

### 分布式的特点
> 1. 分布性
> * 多台计算机随意分布，随时变动。

> 2. 对等性
> * 没有主/从之分，所有计算机节点都是对等的，`数据副本`（在不同节点上持久化同一份数据）和`服务副本`（多个节点提供同样的服务）。

> 3. 并发性
> * 多个节点并发的操作一些共享资源。

> 4. 缺乏全局始终
> * 缺乏一个全局的时钟控制。

> 5. 故障总是会发生
> * 任何在设计阶段考虑到的异常情况，一定会在系统实际运行中发生。

### 分布式环境的各种问题
> 1. 通信异常
> * 节点间通信不稳定。

> 2. 网络分区
> * 部分节点之间可以正常通信，出现局部小集群（脑裂）。

> 3. 三态
> * 每次请求与响应状态，分为，成功、失败、超时。
> * 网络是不可靠的，可能发送过程失败，可能响应过程失败，无法确定当前请求是否被成功处理。

> 4. 节点故障
> * 每个节点都可能出现故障。

## 从ACID到CAP/BASE

### ACID

